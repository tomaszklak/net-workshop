version: '3.2'

services:
  client1_ipv6:
    container_name: client1_ipv6
    hostname: client1_ipv6
    privileged: true
    entrypoint: /shared/common/entrypoint.sh
    build:
      context: .
    tty: true
    networks:
      network1_ipv6:
        ipv6_address: fd00:1::10
    volumes:
        - ./shared/common:/shared/common
        - ./shared/client1_data:/shared/unique

  server1_ipv6:
    container_name: server1_ipv6
    hostname: server1_ipv6
    privileged: true
    entrypoint: /shared/common/entrypoint.sh
    build:
      context: .
    tty: true
    networks:
      network1_ipv6:
        ipv6_address: fd00:1::20
      network2_ipv6:
        ipv6_address: fd00:2::20
    volumes:
        - ./shared/common:/shared/common
        - ./shared/server1_data:/shared/unique

  server2_ipv6:
    container_name: server2_ipv6
    hostname: server2_ipv6
    privileged: true
    entrypoint: /shared/common/entrypoint.sh
    build:
      context: .
    tty: true
    networks:
      network2_ipv6:
        ipv6_address: fd00:2::30
      network3_ipv6:
        ipv6_address: fd00:3::30
    volumes:
        - ./shared/common:/shared/common
        - ./shared/server2_data:/shared/unique


  client2_ipv6:
    container_name: client2_ipv6
    hostname: client2_ipv6
    privileged: true
    entrypoint: /shared/common/entrypoint.sh
    build:
      context: .
    tty: true
    networks:
      network3_ipv6:
        ipv6_address: fd00:3::40
    volumes:
        - ./shared/common:/shared/common
        - ./shared/client2_data:/shared/unique

networks:
  network1_ipv6:
    enable_ipv6: true
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: fd00:1::/64

  network2_ipv6:
    enable_ipv6: true
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: fd00:2::/64

  network3_ipv6:
    enable_ipv6: true
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: fd00:3::/64

